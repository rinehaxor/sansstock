import{j as r}from"./jsx-runtime.D_zvdyIk.js";import{r as c}from"./index.DMVOjPfi.js";function B({initialPage:x=1,initialArticles:f=[],initialTotalPages:b=1,initialTotalArticles:y=0}){const[S,p]=c.useState(f),[s,w]=c.useState(x),[n,j]=c.useState(b),[C,v]=c.useState(y),[l,h]=c.useState(!1),g=10,k=async t=>{h(!0);try{const o=await fetch(`/api/articles?page=${t}&limit=${g}&status=published`);if(o.ok){const i=await o.json(),e=i.data||[];p(e),j(i.totalPages||Math.ceil((i.total||0)/g)),v(i.total||0),w(t);const d=new URL(window.location.href);t===1?d.searchParams.delete("page"):d.searchParams.set("page",t.toString()),window.history.pushState({page:t},"",d.toString());const u=document.getElementById("news-list-section");if(u){const M=e.map(a=>{const N=a.categories?.name||"Umum",L=$(a.published_at||a.created_at);return`
                     <article class="group bg-white rounded-xl border border-gray-200 p-6 hover:shadow-md transition-shadow">
                        <a href="${`/artikel/${a.slug}`}" class="flex gap-6">
                           <div class="flex-shrink-0">
                              ${a.thumbnail_url?`<img src="${a.thumbnail_url}" alt="${a.thumbnail_alt||a.title||"Article thumbnail"}" class="w-48 h-28 rounded-lg object-cover" loading="lazy" />`:`<div class="w-48 h-28 rounded-lg bg-gradient-to-br from-gray-400 to-gray-500 flex items-center justify-center">
                                    <svg class="w-12 h-12 text-white opacity-80" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                       <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10a2 2 0 012 2v1m2 13a2 2 0 01-2-2V7m2 13a2 2 0 002-2V9a2 2 0 00-2-2h-2m-4-3H9M7 16h6M7 8h6v4H7V8z"></path>
                                    </svg>
                                 </div>`}
                           </div>
                           <div class="flex-1 min-w-0">
                              <h3 class="text-xl font-bold text-gray-900 group-hover:text-blue-600 mb-2 leading-tight">${a.title}</h3>
                              <p class="text-sm text-gray-600 mb-3 line-clamp-2">${a.summary||"Tidak ada ringkasan tersedia..."}</p>
                              <p class="text-sm text-blue-600 font-medium">
                                 ${N} | ${L}
                              </p>
                           </div>
                        </a>
                     </article>
                  `}).join("");u.innerHTML=M,u.scrollIntoView({behavior:"smooth",block:"start"})}}}catch(o){console.error("Error fetching articles:",o)}finally{h(!1)}},m=t=>{t>=1&&t<=n&&t!==s&&k(t)},$=t=>{if(!t)return"Baru saja";const o=new Date(t),e=Math.floor((new Date().getTime()-o.getTime())/1e3);return e<60?"Baru saja":e<3600?`${Math.floor(e/60)} menit yang lalu`:e<86400?`${Math.floor(e/3600)} jam yang lalu`:e<604800?`${Math.floor(e/86400)} hari yang lalu`:e<2592e3?`${Math.floor(e/604800)} minggu yang lalu`:`${Math.floor(e/2592e3)} bulan yang lalu`};return r.jsxs(r.Fragment,{children:[l&&r.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-12 text-center mb-6",children:[r.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),r.jsx("p",{className:"text-gray-500 text-lg mt-4",children:"Memuat artikel..."})]}),n>1&&r.jsxs("div",{className:"flex items-center justify-center gap-2 mt-8",children:[r.jsx("button",{onClick:()=>m(s-1),disabled:s<=1||l,className:`px-4 py-2 rounded-lg border transition-colors ${s>1&&!l?"border-gray-300 text-gray-700 hover:bg-gray-50":"border-gray-200 text-gray-400 cursor-not-allowed opacity-50"}`,children:r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 19l-7-7 7-7"})})}),r.jsxs("span",{className:"px-4 py-2 text-sm text-gray-700",children:["Halaman ",s," dari ",n]}),r.jsx("button",{onClick:()=>m(s+1),disabled:s>=n||l,className:`px-4 py-2 rounded-lg border transition-colors ${s<n&&!l?"border-gray-300 text-gray-700 hover:bg-gray-50":"border-gray-200 text-gray-400 cursor-not-allowed opacity-50"}`,children:r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5l7 7-7 7"})})})]})]})}export{B as default};
