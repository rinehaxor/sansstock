import{j as r}from"./jsx-runtime.D_zvdyIk.js";import{r as n}from"./index.DMVOjPfi.js";import{D as j}from"./DataTable.BW11Mfvz.js";import{B as l}from"./Badge.BMvICgvW.js";import{z as c}from"./index.D6iQpRBa.js";import"./utils.CBfrqCZ4.js";import"./Input.BNCvmRV-.js";import"./index.3rXK4OIH.js";async function _(i){if(confirm("Apakah Anda yakin ingin menghapus IPO listing ini?"))try{const a=await fetch(`/api/ipo-listings/${i}`,{method:"DELETE",credentials:"include"});if(a.ok)c.success("IPO listing berhasil dihapus"),window.location.reload();else{const t=await a.json();c.error("Error: "+(t.error||"Gagal menghapus IPO listing"))}}catch{c.error("Error: Gagal menghapus IPO listing")}}function v(i){return i==null?"-":new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0,maximumFractionDigits:0}).format(i)}function P({ipoListings:i,currentPage:a=1,totalPages:t=1,totalItems:d=0,itemsPerPage:m=10,paginationBaseUrl:p="/dashboard/ipo-listings"}){const[g,o]=n.useState([]),[u,x]=n.useState([]);n.useEffect(()=>{try{const e=JSON.parse(i);o(Array.isArray(e)?e:[])}catch(e){console.error("Error parsing IPO listings:",e),o([])}},[i]);const h=[{id:"ticker_symbol",header:"Ticker",accessorKey:"ticker_symbol",cell:({row:e})=>r.jsx("div",{className:"font-medium text-blue-600",children:e.original.ticker_symbol})},{id:"company_name",header:"Nama Perusahaan",accessorKey:"company_name",cell:({row:e})=>r.jsx("div",{className:"max-w-xs truncate",children:e.original.company_name})},{id:"ipo_date",header:"Tanggal IPO",accessorKey:"ipo_date",cell:({row:e})=>{const s=new Date(e.original.ipo_date);return r.jsx("div",{children:s.toLocaleDateString("id-ID",{year:"numeric",month:"short",day:"numeric"})})}},{id:"general_sector",header:"Sektor",accessorKey:"general_sector",cell:({row:e})=>r.jsxs("div",{className:"max-w-xs",children:[r.jsx("div",{className:"text-sm font-medium",children:e.original.general_sector||"-"}),e.original.specific_sector&&r.jsx("div",{className:"text-xs text-gray-500",children:e.original.specific_sector})]})},{id:"ipo_price",header:"Harga IPO",accessorKey:"ipo_price",cell:({row:e})=>r.jsx("div",{children:v(e.original.ipo_price)})},{id:"underwriters",header:"Underwriter",accessorKey:"ipo_underwriters",cell:({row:e})=>{const s=e.original.ipo_underwriters||[];return s.length===0?r.jsx("div",{className:"text-gray-400",children:"-"}):r.jsxs("div",{className:"flex flex-wrap gap-1 max-w-xs",children:[s.slice(0,2).map((f,y)=>r.jsx(l,{variant:"secondary",className:"text-xs",children:f.underwriter.name},y)),s.length>2&&r.jsxs(l,{variant:"outline",className:"text-xs",children:["+",s.length-2]})]})}},{id:"actions",header:"Aksi",cell:({row:e})=>r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("a",{href:`/dashboard/ipo-listings/${e.original.id}/edit`,className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"Edit"}),r.jsx("button",{onClick:()=>_(e.original.id),className:"text-red-600 hover:text-red-800 text-sm font-medium",children:"Hapus"})]})}];return r.jsx("div",{className:"space-y-4",children:r.jsx(j,{columns:h,data:g,selectedRows:u,onSelectedRowsChange:x,currentPage:a,totalPages:t,totalItems:d,itemsPerPage:m,paginationBaseUrl:p})})}export{P as default};
