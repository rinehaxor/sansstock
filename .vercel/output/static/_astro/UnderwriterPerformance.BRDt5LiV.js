import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as l}from"./index.DMVOjPfi.js";import{C as y}from"./Card.DNFj8Mwi.js";import"./utils.CBfrqCZ4.js";function d(a){return`${a>=0?"+":""}${a.toFixed(2)}%`}function x(a){return a===1?"Hari 1":a===7?"Minggu 1":a===30?"Bulan 1":a===90?"Bulan 3":a===180?"Bulan 6":a===365?"Tahun 1":`${a} hari`}function k({underwriters:a}){const[n,h]=l.useState([]),[i,p]=l.useState(null),[o,g]=l.useState("name"),[m,f]=l.useState(null);l.useEffect(()=>{try{const t=JSON.parse(a);h(Array.isArray(t)?t:[])}catch(t){console.error("Error parsing underwriters:",t),h([])}},[a]);const j=l.useMemo(()=>{const t=[...n];switch(o){case"total_ipos":return t.sort((r,c)=>c.total_ipos-r.total_ipos);case"avg_performance":const s=m||30;return t.sort((r,c)=>{const v=r.performance_by_period[s]?.avg||0;return(c.performance_by_period[s]?.avg||0)-v});default:return t.sort((r,c)=>r.name.localeCompare(c.name))}},[n,o,m]),u=l.useMemo(()=>{const t=new Set;return n.forEach(s=>{Object.keys(s.performance_by_period).forEach(r=>t.add(parseInt(r)))}),Array.from(t).sort((s,r)=>s-r)},[n]);return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Urutkan berdasarkan"}),e.jsxs("select",{value:o,onChange:t=>g(t.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"name",children:"Nama"}),e.jsx("option",{value:"total_ipos",children:"Total IPO"}),e.jsx("option",{value:"avg_performance",children:"Rata-rata Performa"})]})]}),o==="avg_performance"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Periode"}),e.jsxs("select",{value:m||"",onChange:t=>f(t.target.value?parseInt(t.target.value):null),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"Semua Periode"}),u.map(t=>e.jsx("option",{value:t,children:x(t)},t))]})]})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:j.map(t=>e.jsx(y,{className:"p-4 cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>p(t),children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:t.name}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Total IPO: ",t.total_ipos]})]}),e.jsx("div",{className:"space-y-2",children:u.slice(0,3).map(s=>{const r=t.performance_by_period[s];return r?e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsxs("span",{className:"text-gray-600",children:[x(s),":"]}),e.jsx("span",{className:`font-medium ${r.avg>=0?"text-green-600":"text-red-600"}`,children:d(r.avg)})]},s):null})}),e.jsx("button",{className:"w-full mt-2 text-sm text-blue-600 hover:text-blue-800 font-medium",children:"Lihat Detail â†’"})]})},t.id))}),i&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsx("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:i.name}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Total IPO: ",i.total_ipos]})]}),e.jsx("button",{onClick:()=>p(null),className:"text-gray-400 hover:text-gray-600",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Rata-rata Performa"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Periode"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Rata-rata"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Min"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Max"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Jumlah"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:u.map(t=>{const s=i.performance_by_period[t];return s?e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:x(t)}),e.jsx("td",{className:`px-4 py-3 text-sm font-medium ${s.avg>=0?"text-green-600":"text-red-600"}`,children:d(s.avg)}),e.jsx("td",{className:`px-4 py-3 text-sm ${s.min>=0?"text-green-600":"text-red-600"}`,children:d(s.min)}),e.jsx("td",{className:`px-4 py-3 text-sm ${s.max>=0?"text-green-600":"text-red-600"}`,children:d(s.max)}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-500",children:s.count})]},t):null})})]})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Daftar IPO"}),e.jsx("div",{className:"space-y-2",children:i.ipo_listings.map(t=>e.jsx("div",{className:"p-3 border border-gray-200 rounded-lg hover:bg-gray-50",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium text-gray-900",children:[t.ticker_symbol," - ",t.company_name]}),e.jsx("div",{className:"text-sm text-gray-500",children:new Date(t.ipo_date).toLocaleDateString("id-ID",{year:"numeric",month:"long",day:"numeric"})})]}),e.jsx("div",{className:"text-right",children:t.ipo_performance_metrics&&t.ipo_performance_metrics.length>0&&e.jsx("div",{className:"space-y-1",children:t.ipo_performance_metrics.slice(0,3).map((s,r)=>e.jsxs("div",{className:`text-xs ${s.metric_value>=0?"text-green-600":"text-red-600"}`,children:[x(s.period_days),": ",d(s.metric_value)]},r))})})]})},t.id))})]})]})})})]})}export{k as default};
