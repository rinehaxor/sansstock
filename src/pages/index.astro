---
import Layout from '../layouts/Layout.astro';
import FeaturedNews from '../components/FeaturedNews.astro';
import MarketOverview from '../components/MarketOverview.astro';
import NewsList from '../components/NewsList.astro';

// Site URL akan otomatis detect dari environment variable atau request
const siteUrl = import.meta.env.SITE_URL || Astro.site?.href || (Astro.url ? `${Astro.url.protocol}//${Astro.url.host}` : 'http://localhost:4321');
const pageTitle = 'SansStocks - Berita Ekonomi & Analisis Pasar Terpercaya';
const pageDescription = 'Portal berita ekonomi, saham, dan analisis pasar terpercaya. Dapatkan insight terbaru tentang pasar modal Indonesia, analisis saham, dan berita ekonomi terkini.';
const pageImage = `${siteUrl}/logo.png`;
---

<Layout 
	title={pageTitle}
	description={pageDescription}
	keywords="berita ekonomi, saham, pasar modal, analisis finansial, investasi, IHSG, rupiah, ekonomi Indonesia"
>
	<Fragment slot="head">
		{/* Robots Meta */}
		<meta name="robots" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1" />
		<meta name="googlebot" content="index, follow" />
		
		{/* Open Graph */}
		<meta property="og:type" content="website" />
		<meta property="og:title" content={pageTitle} />
		<meta property="og:description" content={pageDescription} />
		<meta property="og:image" content={pageImage} />
		<meta property="og:image:width" content="1200" />
		<meta property="og:image:height" content="630" />
		<meta property="og:url" content={siteUrl} />
		<meta property="og:site_name" content="SansStocks" />
		<meta property="og:locale" content="id_ID" />
		
		{/* Twitter Card */}
		<meta name="twitter:card" content="summary_large_image" />
		<meta name="twitter:title" content={pageTitle} />
		<meta name="twitter:description" content={pageDescription} />
		<meta name="twitter:image" content={pageImage} />
		
		{/* Canonical URL */}
		<link rel="canonical" href={siteUrl} />
		
		{/* Author & Publisher */}
		<meta name="author" content="SansStocks" />
		<meta name="publisher" content="SansStocks" />
		
		{/* Structured Data (JSON-LD) - Organization */}
		<script type="application/ld+json" set:html={JSON.stringify({
			"@context": "https://schema.org",
			"@type": "Organization",
			"name": "SansStocks",
			"url": siteUrl,
			"logo": {
				"@type": "ImageObject",
				"url": `${siteUrl}/logo.png`,
				"width": 200,
				"height": 200
			},
			"sameAs": [
				// Tambahkan social media links jika ada
				// "https://twitter.com/sansstocks",
				// "https://facebook.com/sansstocks"
			]
		})} />
		
		{/* Structured Data (JSON-LD) - WebSite */}
		<script type="application/ld+json" set:html={JSON.stringify({
			"@context": "https://schema.org",
			"@type": "WebSite",
			"name": "SansStocks",
			"url": siteUrl,
			"description": pageDescription,
			"publisher": {
				"@type": "Organization",
				"name": "SansStocks"
			},
			"potentialAction": {
				"@type": "SearchAction",
				"target": {
					"@type": "EntryPoint",
					"urlTemplate": `${siteUrl}/artikel?search={search_term_string}`
				},
				"query-input": "required name=search_term_string"
			}
		})} />
		
		{/* Structured Data (JSON-LD) - BreadcrumbList for Homepage */}
		<script type="application/ld+json" set:html={JSON.stringify({
			"@context": "https://schema.org",
			"@type": "BreadcrumbList",
			"itemListElement": [{
				"@type": "ListItem",
				"position": 1,
				"name": "Beranda",
				"item": siteUrl
			}]
		})} />
	</Fragment>

	<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
	<FeaturedNews />
	<MarketOverview />
	<NewsList />
	</div>
</Layout>
